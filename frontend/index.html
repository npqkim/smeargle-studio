<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Image Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Song to Fantasy Character Generator</h1>

    <input id="file-upload" type="file" accept=".mp3" />

    <label for="file-upload" class="circle-upload">
        <img src="images/upload_icon.png" class="circle-icon">
    </label>
        <br><br>

        <!-- <label>Choose a genre:</label>
        <select id="genreSelect">
            <option value="">Select genre</option>
            <option value="acoustic">Acoustic</option>
            <option value="afrobeat">Afrobeat</option>
            <option value="alternative">Alternative</option>
            <option value="ambient">Ambient</option>
            <option value="blues">Blues</option>
            <option value="classical">Classical</option>
            <option value="country">Country</option>
            <option value="dance">Dance</option>
            <option value="disco">Disco</option>
            <option value="drill">Drill</option>
            <option value="drum and bass">Drum and Bass</option>
            <option value="dubstep">Dubstep</option>
            <option value="edm">EDM</option>
            <option value="electronic">Electronic</option>
            <option value="emo">Emo</option>
            <option value="folk">Folk</option>
            <option value="funk">Funk</option>
            <option value="gospel">Gospel</option>
            <option value="hard rock">Hard Rock</option>
            <option value="heavy metal">Heavy Metal</option>
            <option value="hiphop">Hip-Hop</option>
            <option value="house">House</option>
            <option value="indie">Indie</option>
            <option value="jazz">Jazz</option>
            <option value="k-pop">K-Pop</option>
            <option value="latin">Latin</option>
            <option value="lofi">Lofi</option>
            <option value="metal">Metal</option>
            <option value="new age">New Age</option>
            <option value="opÃ©ra">Opera</option>
            <option value="orchestral">Orchestral</option>
            <option value="pop">Pop</option>
            <option value="punk">Punk</option>
            <option value="r&b">R&B</option>
            <option value="rap">Rap</option>
            <option value="reggae">Reggae</option>
            <option value="reggaeton">Reggaeton</option>
            <option value="rock">Rock</option>
            <option value="soul">Soul</option>
            <option value="synthwave">Synthwave</option>
            <option value="techno">Techno</option>
            <option value="trap">Trap</option>
            <option value="trance">Trance</option>
            <option value="vaporwave">Vaporwave</option>
            <option value="world">World</option>
        </select> -->

        <br><br>
        <input id="genreCustom" placeholder="enter a genre...">

        <br><br>

        <button id="submitBtn">Generate</button>
        <script>
        document.getElementById("generate-btn").addEventListener("click", async () => {
            // Optional: show loading state
            document.getElementById("generate-btn").innerText = "Generating...";
            
            // 1. Send request to your backend
            const response = await fetch("/generate", {
                method: "POST",
            });

            // 2. Receive the backend response
            const data = await response.json();

            // data.image_url - URL to generated image
            // data.description - character personality text

            // 3. Save the results so next page can use them
            localStorage.setItem("generatedImageUrl", data.image_url);
            localStorage.setItem("generatedDescription", data.description);

            // 4. Redirect automatically to result page
            window.location.href = "result.html";
        });
        </script>
        <!-- <script>
        document.getElementById("submitBtn").addEventListener("click", () => {
            console.log("Generate button clicked!");

            // TEMPORARY TEST REDIRECT
            window.location.href = "result.html";
        });
        </script> -->


        <div id="result"></div>

        <script src="script.js"></script>
    </div>
</body>
</html>